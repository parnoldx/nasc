/* MainWindow.c generated by valac 0.32.1, the Vala compiler
 * generated from MainWindow.vala, do not modify */

/*
 * Copyright (c) 2015 Peter Arnold
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public
 * License along with this program; if not, write to the
 * Free Software Foundation, Inc., 59 Temple Place - Suite 330,
 * Boston, MA 02111-1307, USA.
 */

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <granite.h>
#include <gdk/gdk.h>
#include <glib/gi18n-lib.h>
#include <gtksourceview/gtksource.h>
#include <gee.h>
#include <stdlib.h>
#include <string.h>
#include <cairo-pdf.h>
#include <float.h>
#include <math.h>
#include <cairo.h>


#define NASC_TYPE_MAIN_WINDOW (nasc_main_window_get_type ())
#define NASC_MAIN_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), NASC_TYPE_MAIN_WINDOW, NascMainWindow))
#define NASC_MAIN_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), NASC_TYPE_MAIN_WINDOW, NascMainWindowClass))
#define NASC_IS_MAIN_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), NASC_TYPE_MAIN_WINDOW))
#define NASC_IS_MAIN_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), NASC_TYPE_MAIN_WINDOW))
#define NASC_MAIN_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), NASC_TYPE_MAIN_WINDOW, NascMainWindowClass))

typedef struct _NascMainWindow NascMainWindow;
typedef struct _NascMainWindowClass NascMainWindowClass;
typedef struct _NascMainWindowPrivate NascMainWindowPrivate;

#define NASC_TYPE_NASC_APP (nasc_nasc_app_get_type ())
#define NASC_NASC_APP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), NASC_TYPE_NASC_APP, NascNascApp))
#define NASC_NASC_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), NASC_TYPE_NASC_APP, NascNascAppClass))
#define NASC_IS_NASC_APP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), NASC_TYPE_NASC_APP))
#define NASC_IS_NASC_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), NASC_TYPE_NASC_APP))
#define NASC_NASC_APP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), NASC_TYPE_NASC_APP, NascNascAppClass))

typedef struct _NascNascApp NascNascApp;
typedef struct _NascNascAppClass NascNascAppClass;

#define TYPE_CONTROLLER (controller_get_type ())
#define CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_CONTROLLER, Controller))
#define CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_CONTROLLER, ControllerClass))
#define IS_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_CONTROLLER))
#define IS_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_CONTROLLER))
#define CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_CONTROLLER, ControllerClass))

typedef struct _Controller Controller;
typedef struct _ControllerClass ControllerClass;

#define TYPE_INPUT_VIEW (input_view_get_type ())
#define INPUT_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_INPUT_VIEW, InputView))
#define INPUT_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_INPUT_VIEW, InputViewClass))
#define IS_INPUT_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_INPUT_VIEW))
#define IS_INPUT_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_INPUT_VIEW))
#define INPUT_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_INPUT_VIEW, InputViewClass))

typedef struct _InputView InputView;
typedef struct _InputViewClass InputViewClass;

#define TYPE_RESULT_VIEW (result_view_get_type ())
#define RESULT_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_RESULT_VIEW, ResultView))
#define RESULT_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_RESULT_VIEW, ResultViewClass))
#define IS_RESULT_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_RESULT_VIEW))
#define IS_RESULT_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_RESULT_VIEW))
#define RESULT_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_RESULT_VIEW, ResultViewClass))

typedef struct _ResultView ResultView;
typedef struct _ResultViewClass ResultViewClass;

#define TYPE_HELP_BOX (help_box_get_type ())
#define HELP_BOX(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_HELP_BOX, HelpBox))
#define HELP_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_HELP_BOX, HelpBoxClass))
#define IS_HELP_BOX(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_HELP_BOX))
#define IS_HELP_BOX_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_HELP_BOX))
#define HELP_BOX_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_HELP_BOX, HelpBoxClass))

typedef struct _HelpBox HelpBox;
typedef struct _HelpBoxClass HelpBoxClass;

#define TYPE_PERIODIC_TABLE (periodic_table_get_type ())
#define PERIODIC_TABLE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PERIODIC_TABLE, PeriodicTable))
#define PERIODIC_TABLE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PERIODIC_TABLE, PeriodicTableClass))
#define IS_PERIODIC_TABLE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PERIODIC_TABLE))
#define IS_PERIODIC_TABLE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PERIODIC_TABLE))
#define PERIODIC_TABLE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PERIODIC_TABLE, PeriodicTableClass))

typedef struct _PeriodicTable PeriodicTable;
typedef struct _PeriodicTableClass PeriodicTableClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
typedef struct _Block1Data Block1Data;

#define TYPE_NASC_SETTINGS (nasc_settings_get_type ())
#define NASC_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_NASC_SETTINGS, NascSettings))
#define NASC_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_NASC_SETTINGS, NascSettingsClass))
#define IS_NASC_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_NASC_SETTINGS))
#define IS_NASC_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_NASC_SETTINGS))
#define NASC_SETTINGS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_NASC_SETTINGS, NascSettingsClass))

typedef struct _NascSettings NascSettings;
typedef struct _NascSettingsClass NascSettingsClass;
typedef struct _InputViewPrivate InputViewPrivate;

#define TYPE_NASC_SHEET (nasc_sheet_get_type ())
#define NASC_SHEET(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_NASC_SHEET, NascSheet))
#define NASC_SHEET_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_NASC_SHEET, NascSheetClass))
#define IS_NASC_SHEET(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_NASC_SHEET))
#define IS_NASC_SHEET_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_NASC_SHEET))
#define NASC_SHEET_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_NASC_SHEET, NascSheetClass))

typedef struct _NascSheet NascSheet;
typedef struct _NascSheetClass NascSheetClass;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _cairo_destroy0(var) ((var == NULL) ? NULL : (var = (cairo_destroy (var), NULL)))
#define _cairo_surface_destroy0(var) ((var == NULL) ? NULL : (var = (cairo_surface_destroy (var), NULL)))
#define __g_slist_free__g_free0_0(var) ((var == NULL) ? NULL : (var = (_g_slist_free__g_free0_ (var), NULL)))

#define NASC_TYPE_PASTE_BIN_DIALOG (nasc_paste_bin_dialog_get_type ())
#define NASC_PASTE_BIN_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), NASC_TYPE_PASTE_BIN_DIALOG, NascPasteBinDialog))
#define NASC_PASTE_BIN_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), NASC_TYPE_PASTE_BIN_DIALOG, NascPasteBinDialogClass))
#define NASC_IS_PASTE_BIN_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), NASC_TYPE_PASTE_BIN_DIALOG))
#define NASC_IS_PASTE_BIN_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), NASC_TYPE_PASTE_BIN_DIALOG))
#define NASC_PASTE_BIN_DIALOG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), NASC_TYPE_PASTE_BIN_DIALOG, NascPasteBinDialogClass))

typedef struct _NascPasteBinDialog NascPasteBinDialog;
typedef struct _NascPasteBinDialogClass NascPasteBinDialogClass;
typedef struct _Block2Data Block2Data;
#define _g_list_free0(var) ((var == NULL) ? NULL : (var = (g_list_free (var), NULL)))

#define TYPE_TUTORIAL (tutorial_get_type ())
#define TUTORIAL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_TUTORIAL, Tutorial))
#define TUTORIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_TUTORIAL, TutorialClass))
#define IS_TUTORIAL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_TUTORIAL))
#define IS_TUTORIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_TUTORIAL))
#define TUTORIAL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_TUTORIAL, TutorialClass))

typedef struct _Tutorial Tutorial;
typedef struct _TutorialClass TutorialClass;

struct _NascMainWindow {
	GtkWindow parent_instance;
	NascMainWindowPrivate * priv;
};

struct _NascMainWindowClass {
	GtkWindowClass parent_class;
};

struct _NascMainWindowPrivate {
	NascNascApp* app;
	GtkPaned* pane;
	Controller* controller;
	InputView* input_box;
	ResultView* result_box;
	HelpBox* help_box;
	PeriodicTable* periodic_box;
	GtkToggleButton* help_button;
	GtkStack* main_stack;
	GtkStack* right_stack;
};

struct _Block1Data {
	int _ref_count_;
	NascMainWindow* self;
	GtkPopover* export_popover;
	GtkBox* main_box;
	GtkInfoBar* info_bar;
	GtkScrolledWindow* scroll;
};

struct _InputView {
	GtkBox parent_instance;
	InputViewPrivate * priv;
	GtkSourceBuffer* buffer;
	GtkSourceView* source_view;
	GeeArrayList* operators;
	gboolean skip_change;
	gboolean scroll_needed;
};

struct _InputViewClass {
	GtkBoxClass parent_class;
};

struct _Block2Data {
	int _ref_count_;
	NascMainWindow* self;
	GtkInfoBar* info_bar;
};


static gpointer nasc_main_window_parent_class = NULL;

#define NASC_left_margin 12
#define NASC_vertical_padding 8
#define NASC_top_padding 10
GType nasc_main_window_get_type (void) G_GNUC_CONST;
GType nasc_nasc_app_get_type (void) G_GNUC_CONST;
GType controller_get_type (void) G_GNUC_CONST;
GType input_view_get_type (void) G_GNUC_CONST;
GType result_view_get_type (void) G_GNUC_CONST;
GType help_box_get_type (void) G_GNUC_CONST;
GType periodic_table_get_type (void) G_GNUC_CONST;
#define NASC_MAIN_WINDOW_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), NASC_TYPE_MAIN_WINDOW, NascMainWindowPrivate))
enum  {
	NASC_MAIN_WINDOW_DUMMY_PROPERTY
};
NascMainWindow* nasc_main_window_new (NascNascApp* app);
NascMainWindow* nasc_main_window_construct (GType object_type, NascNascApp* app);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
GType nasc_settings_get_type (void) G_GNUC_CONST;
NascSettings* nasc_settings_get_instance (void);
gint nasc_settings_get_opening_x (NascSettings* self);
gint nasc_settings_get_opening_y (NascSettings* self);
gint nasc_settings_get_window_width (NascSettings* self);
gint nasc_settings_get_window_height (NascSettings* self);
static gboolean nasc_main_window_on_window_closing (NascMainWindow* self);
static gboolean _nasc_main_window_on_window_closing_gtk_widget_delete_event (GtkWidget* _sender, GdkEventAny* event, gpointer self);
static void __lambda48_ (Block1Data* _data1_);
static void ___lambda48__gtk_button_clicked (GtkButton* _sender, gpointer self);
InputView* input_view_new (void);
InputView* input_view_construct (GType object_type);
ResultView* result_view_new (void);
ResultView* result_view_construct (GType object_type);
gint nasc_settings_get_pane_position (NascSettings* self);
static void __lambda49_ (Block1Data* _data1_, GtkAllocation* alloc);
static void ___lambda49__gtk_widget_size_allocate (GtkWidget* _sender, GtkAllocation* allocation, gpointer self);
Controller* controller_new (InputView* input, ResultView* results);
Controller* controller_construct (GType object_type, InputView* input, ResultView* results);
HelpBox* help_box_new (Controller* controller);
HelpBox* help_box_construct (GType object_type, Controller* controller);
PeriodicTable* periodic_table_new (Controller* controller);
PeriodicTable* periodic_table_construct (GType object_type, Controller* controller);
static void __lambda50_ (Block1Data* _data1_);
static void ___lambda50__periodic_table_close (PeriodicTable* _sender, gpointer self);
static void __lambda51_ (NascMainWindow* self, GObject* s, GParamSpec* p);
void result_view_set_width (ResultView* self, gint width);
static void ___lambda51__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self);
static void nasc_main_window_help_toggle (NascMainWindow* self);
static void _nasc_main_window_help_toggle_gtk_toggle_button_toggled (GtkToggleButton* _sender, gpointer self);
static void __lambda52_ (NascMainWindow* self);
GType nasc_sheet_get_type (void) G_GNUC_CONST;
NascSheet* controller_add_sheet (Controller* self);
void result_view_clear (ResultView* self);
static void ___lambda52__input_view_new_trigger (InputView* _sender, gpointer self);
static void __lambda53_ (NascMainWindow* self);
static void ___lambda53__input_view_help (InputView* _sender, gpointer self);
static void __lambda54_ (NascMainWindow* self);
static void ___lambda54__help_box_close_help (HelpBox* _sender, gpointer self);
static void __lambda55_ (Block1Data* _data1_);
NascSheet* controller_get_actual_sheet (Controller* self);
static void _g_free0_ (gpointer var);
static void _g_slist_free__g_free0_ (GSList* self);
static void ___lambda55__gtk_button_clicked (GtkButton* _sender, gpointer self);
static void __lambda56_ (Block1Data* _data1_);
NascPasteBinDialog* nasc_paste_bin_dialog_new (GtkWindow* parent, Controller* controller);
NascPasteBinDialog* nasc_paste_bin_dialog_construct (GType object_type, GtkWindow* parent, Controller* controller);
GType nasc_paste_bin_dialog_get_type (void) G_GNUC_CONST;
static void ___lambda56__gtk_button_clicked (GtkButton* _sender, gpointer self);
static void __lambda57_ (Block1Data* _data1_);
static gboolean __lambda58_ (NascMainWindow* self);
void input_view_delete_characters (InputView* self, gint count);
static gboolean ___lambda58__gsource_func (gpointer self);
static void nasc_main_window_show_tutorial (NascMainWindow* self, GtkInfoBar* info_bar);
static void ___lambda57__controller_tutorial (Controller* _sender, gpointer self);
static void __lambda86_ (NascMainWindow* self);
static gboolean __lambda87_ (NascMainWindow* self);
static gboolean ___lambda87__gsource_func (gpointer self);
void periodic_table_init (PeriodicTable* self);
static void ___lambda86__controller_periodic (Controller* _sender, gpointer self);
static gboolean __lambda88_ (Block1Data* _data1_);
gboolean nasc_settings_get_show_tutorial (NascSettings* self);
static gboolean ___lambda88__gsource_func (gpointer self);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
GType tutorial_get_type (void) G_GNUC_CONST;
Tutorial* tutorial_new (Controller* controller);
Tutorial* tutorial_construct (GType object_type, Controller* controller);
static void __lambda85_ (Block2Data* _data2_);
static void ___lambda85__tutorial_close (Tutorial* _sender, gpointer self);
void help_box_search_focus (HelpBox* self);
void nasc_settings_set_window_height (NascSettings* self, gint value);
void nasc_settings_set_window_width (NascSettings* self, gint value);
void nasc_settings_set_pane_position (NascSettings* self, gint value);
void nasc_settings_set_opening_x (NascSettings* self, gint value);
void nasc_settings_set_opening_y (NascSettings* self, gint value);
void nasc_settings_set_show_tutorial (NascSettings* self, gboolean value);
void controller_store_sheet_content (Controller* self);
static void nasc_main_window_finalize (GObject* obj);


static Block1Data* block1_data_ref (Block1Data* _data1_) {
	g_atomic_int_inc (&_data1_->_ref_count_);
	return _data1_;
}


static void block1_data_unref (void * _userdata_) {
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
		NascMainWindow* self;
		self = _data1_->self;
		_g_object_unref0 (_data1_->scroll);
		_g_object_unref0 (_data1_->info_bar);
		_g_object_unref0 (_data1_->main_box);
		_g_object_unref0 (_data1_->export_popover);
		_g_object_unref0 (self);
		g_slice_free (Block1Data, _data1_);
	}
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static gboolean _nasc_main_window_on_window_closing_gtk_widget_delete_event (GtkWidget* _sender, GdkEventAny* event, gpointer self) {
	gboolean result;
	result = nasc_main_window_on_window_closing ((NascMainWindow*) self);
	return result;
}


static void __lambda48_ (Block1Data* _data1_) {
	NascMainWindow* self;
	self = _data1_->self;
	gtk_widget_show_all ((GtkWidget*) _data1_->export_popover);
}


static void ___lambda48__gtk_button_clicked (GtkButton* _sender, gpointer self) {
	__lambda48_ (self);
}


static void __lambda49_ (Block1Data* _data1_, GtkAllocation* alloc) {
	NascMainWindow* self;
	GtkAdjustment* v_adjust = NULL;
	GtkAdjustment* _tmp0_ = NULL;
	GtkAdjustment* _tmp1_ = NULL;
	gdouble _tmp2_ = 0.0;
	gdouble _tmp3_ = 0.0;
	gdouble _tmp4_ = 0.0;
	gdouble _tmp5_ = 0.0;
	self = _data1_->self;
	g_return_if_fail (alloc != NULL);
	_tmp0_ = gtk_scrolled_window_get_vadjustment (_data1_->scroll);
	_tmp1_ = _g_object_ref0 (_tmp0_);
	v_adjust = _tmp1_;
	_tmp2_ = gtk_adjustment_get_upper (v_adjust);
	_tmp3_ = _tmp2_;
	_tmp4_ = gtk_adjustment_get_page_size (v_adjust);
	_tmp5_ = _tmp4_;
	gtk_adjustment_set_value (v_adjust, _tmp3_ - _tmp5_);
	_g_object_unref0 (v_adjust);
}


static void ___lambda49__gtk_widget_size_allocate (GtkWidget* _sender, GtkAllocation* allocation, gpointer self) {
	__lambda49_ (self, allocation);
}


static void __lambda50_ (Block1Data* _data1_) {
	NascMainWindow* self;
	GtkStack* _tmp0_ = NULL;
	InputView* _tmp1_ = NULL;
	GtkSourceView* _tmp2_ = NULL;
	self = _data1_->self;
	_tmp0_ = self->priv->main_stack;
	gtk_stack_set_visible_child (_tmp0_, (GtkWidget*) _data1_->main_box);
	_tmp1_ = self->priv->input_box;
	_tmp2_ = _tmp1_->source_view;
	gtk_widget_grab_focus ((GtkWidget*) _tmp2_);
}


static void ___lambda50__periodic_table_close (PeriodicTable* _sender, gpointer self) {
	__lambda50_ (self);
}


static void __lambda51_ (NascMainWindow* self, GObject* s, GParamSpec* p) {
	ResultView* _tmp0_ = NULL;
	GtkPaned* _tmp1_ = NULL;
	gint _tmp2_ = 0;
	GtkPaned* _tmp3_ = NULL;
	gint _tmp4_ = 0;
	gint _tmp5_ = 0;
	g_return_if_fail (s != NULL);
	g_return_if_fail (p != NULL);
	_tmp0_ = self->priv->result_box;
	_tmp1_ = self->priv->pane;
	_tmp2_ = gtk_widget_get_allocated_width ((GtkWidget*) _tmp1_);
	_tmp3_ = self->priv->pane;
	_tmp4_ = gtk_paned_get_position (_tmp3_);
	_tmp5_ = _tmp4_;
	result_view_set_width (_tmp0_, (_tmp2_ - _tmp5_) - 1);
}


static void ___lambda51__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self) {
	__lambda51_ ((NascMainWindow*) self, _sender, pspec);
}


static void _nasc_main_window_help_toggle_gtk_toggle_button_toggled (GtkToggleButton* _sender, gpointer self) {
	nasc_main_window_help_toggle ((NascMainWindow*) self);
}


static void __lambda52_ (NascMainWindow* self) {
	Controller* _tmp0_ = NULL;
	NascSheet* _tmp1_ = NULL;
	NascSheet* _tmp2_ = NULL;
	ResultView* _tmp3_ = NULL;
	_tmp0_ = self->priv->controller;
	_tmp1_ = controller_add_sheet (_tmp0_);
	_tmp2_ = _tmp1_;
	_g_object_unref0 (_tmp2_);
	_tmp3_ = self->priv->result_box;
	result_view_clear (_tmp3_);
}


static void ___lambda52__input_view_new_trigger (InputView* _sender, gpointer self) {
	__lambda52_ ((NascMainWindow*) self);
}


static void __lambda53_ (NascMainWindow* self) {
	GtkToggleButton* _tmp0_ = NULL;
	GtkToggleButton* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	_tmp0_ = self->priv->help_button;
	_tmp1_ = self->priv->help_button;
	_tmp2_ = gtk_toggle_button_get_active (_tmp1_);
	_tmp3_ = _tmp2_;
	gtk_toggle_button_set_active (_tmp0_, !_tmp3_);
	nasc_main_window_help_toggle (self);
}


static void ___lambda53__input_view_help (InputView* _sender, gpointer self) {
	__lambda53_ ((NascMainWindow*) self);
}


static void __lambda54_ (NascMainWindow* self) {
	GtkToggleButton* _tmp0_ = NULL;
	GtkToggleButton* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	_tmp0_ = self->priv->help_button;
	_tmp1_ = self->priv->help_button;
	_tmp2_ = gtk_toggle_button_get_active (_tmp1_);
	_tmp3_ = _tmp2_;
	gtk_toggle_button_set_active (_tmp0_, !_tmp3_);
	nasc_main_window_help_toggle (self);
}


static void ___lambda54__help_box_close_help (HelpBox* _sender, gpointer self) {
	__lambda54_ ((NascMainWindow*) self);
}


static gchar* string_replace (const gchar* self, const gchar* old, const gchar* replacement) {
	gchar* result = NULL;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (old != NULL, NULL);
	g_return_val_if_fail (replacement != NULL, NULL);
	{
		GRegex* regex = NULL;
		const gchar* _tmp0_ = NULL;
		gchar* _tmp1_ = NULL;
		gchar* _tmp2_ = NULL;
		GRegex* _tmp3_ = NULL;
		GRegex* _tmp4_ = NULL;
		gchar* _tmp5_ = NULL;
		GRegex* _tmp6_ = NULL;
		const gchar* _tmp7_ = NULL;
		gchar* _tmp8_ = NULL;
		gchar* _tmp9_ = NULL;
		_tmp0_ = old;
		_tmp1_ = g_regex_escape_string (_tmp0_, -1);
		_tmp2_ = _tmp1_;
		_tmp3_ = g_regex_new (_tmp2_, 0, 0, &_inner_error_);
		_tmp4_ = _tmp3_;
		_g_free0 (_tmp2_);
		regex = _tmp4_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			if (_inner_error_->domain == G_REGEX_ERROR) {
				goto __catch0_g_regex_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		_tmp6_ = regex;
		_tmp7_ = replacement;
		_tmp8_ = g_regex_replace_literal (_tmp6_, self, (gssize) -1, 0, _tmp7_, 0, &_inner_error_);
		_tmp5_ = _tmp8_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			_g_regex_unref0 (regex);
			if (_inner_error_->domain == G_REGEX_ERROR) {
				goto __catch0_g_regex_error;
			}
			_g_regex_unref0 (regex);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		_tmp9_ = _tmp5_;
		_tmp5_ = NULL;
		result = _tmp9_;
		_g_free0 (_tmp5_);
		_g_regex_unref0 (regex);
		return result;
	}
	goto __finally0;
	__catch0_g_regex_error:
	{
		GError* e = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		g_assert_not_reached ();
		_g_error_free0 (e);
	}
	__finally0:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
}


static void _g_free0_ (gpointer var) {
	var = (g_free (var), NULL);
}


static void _g_slist_free__g_free0_ (GSList* self) {
	g_slist_foreach (self, (GFunc) _g_free0_, NULL);
	g_slist_free (self);
}


static void __lambda55_ (Block1Data* _data1_) {
	NascMainWindow* self;
	gchar* sh = NULL;
	Controller* _tmp0_ = NULL;
	NascSheet* _tmp1_ = NULL;
	NascSheet* _tmp2_ = NULL;
	const gchar* _tmp3_ = NULL;
	const gchar* _tmp4_ = NULL;
	gchar* _tmp5_ = NULL;
	GtkFileChooserDialog* chooser = NULL;
	GtkFileChooserDialog* _tmp6_ = NULL;
	GtkFileChooserDialog* _tmp7_ = NULL;
	const gchar* _tmp8_ = NULL;
	gchar* _tmp9_ = NULL;
	gchar* _tmp10_ = NULL;
	GtkFileChooserDialog* _tmp11_ = NULL;
	gint _tmp12_ = 0;
	GtkFileChooserDialog* _tmp32_ = NULL;
	self = _data1_->self;
	gtk_widget_hide ((GtkWidget*) _data1_->export_popover);
	_tmp0_ = self->priv->controller;
	_tmp1_ = controller_get_actual_sheet (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = granite_widgets_source_list_item_get_name ((GraniteWidgetsSourceListItem*) _tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = g_strdup (_tmp4_);
	sh = _tmp5_;
	_tmp6_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new ("Choose a PDF save location", (GtkWindow*) self, GTK_FILE_CHOOSER_ACTION_SAVE, "_Cancel", GTK_RESPONSE_CANCEL, "_Save", GTK_RESPONSE_ACCEPT, NULL);
	g_object_ref_sink (_tmp6_);
	chooser = _tmp6_;
	_tmp7_ = chooser;
	_tmp8_ = sh;
	_tmp9_ = g_strdup_printf ("%s.pdf", _tmp8_);
	_tmp10_ = _tmp9_;
	gtk_file_chooser_set_current_name ((GtkFileChooser*) _tmp7_, _tmp10_);
	_g_free0 (_tmp10_);
	_tmp11_ = chooser;
	_tmp12_ = gtk_dialog_run ((GtkDialog*) _tmp11_);
	if (_tmp12_ == ((gint) GTK_RESPONSE_ACCEPT)) {
		GSList* uris = NULL;
		GtkFileChooserDialog* _tmp13_ = NULL;
		GSList* _tmp14_ = NULL;
		GSList* _tmp15_ = NULL;
		_tmp13_ = chooser;
		_tmp14_ = gtk_file_chooser_get_uris ((GtkFileChooser*) _tmp13_);
		uris = _tmp14_;
		_tmp15_ = uris;
		{
			GSList* uri_collection = NULL;
			GSList* uri_it = NULL;
			uri_collection = _tmp15_;
			for (uri_it = uri_collection; uri_it != NULL; uri_it = uri_it->next) {
				const gchar* uri = NULL;
				uri = (const gchar*) uri_it->data;
				{
					cairo_surface_t* canvas = NULL;
					const gchar* _tmp16_ = NULL;
					gchar* _tmp17_ = NULL;
					gchar* _tmp18_ = NULL;
					gchar* _tmp19_ = NULL;
					gchar* _tmp20_ = NULL;
					GtkPaned* _tmp21_ = NULL;
					gint _tmp22_ = 0;
					GtkPaned* _tmp23_ = NULL;
					gint _tmp24_ = 0;
					cairo_surface_t* _tmp25_ = NULL;
					cairo_surface_t* _tmp26_ = NULL;
					cairo_t* cr = NULL;
					cairo_surface_t* _tmp27_ = NULL;
					cairo_t* _tmp28_ = NULL;
					GtkPaned* _tmp29_ = NULL;
					cairo_t* _tmp30_ = NULL;
					cairo_surface_t* _tmp31_ = NULL;
					_tmp16_ = uri;
					_tmp17_ = string_replace (_tmp16_, "file://", "");
					_tmp18_ = _tmp17_;
					_tmp19_ = g_uri_unescape_string (_tmp18_, NULL);
					_tmp20_ = _tmp19_;
					_tmp21_ = self->priv->pane;
					_tmp22_ = gtk_widget_get_allocated_width ((GtkWidget*) _tmp21_);
					_tmp23_ = self->priv->pane;
					_tmp24_ = gtk_widget_get_allocated_height ((GtkWidget*) _tmp23_);
					_tmp25_ = cairo_pdf_surface_create (_tmp20_, (gdouble) _tmp22_, (gdouble) _tmp24_);
					_tmp26_ = _tmp25_;
					_g_free0 (_tmp20_);
					_g_free0 (_tmp18_);
					canvas = _tmp26_;
					_tmp27_ = canvas;
					_tmp28_ = cairo_create (_tmp27_);
					cr = _tmp28_;
					_tmp29_ = self->priv->pane;
					_tmp30_ = cr;
					gtk_widget_draw ((GtkWidget*) _tmp29_, _tmp30_);
					_tmp31_ = canvas;
					cairo_surface_finish (_tmp31_);
					_cairo_destroy0 (cr);
					_cairo_surface_destroy0 (canvas);
				}
			}
		}
		__g_slist_free__g_free0_0 (uris);
	}
	_tmp32_ = chooser;
	g_signal_emit_by_name ((GtkDialog*) _tmp32_, "close");
	_g_object_unref0 (chooser);
	_g_free0 (sh);
}


static void ___lambda55__gtk_button_clicked (GtkButton* _sender, gpointer self) {
	__lambda55_ (self);
}


static void __lambda56_ (Block1Data* _data1_) {
	NascMainWindow* self;
	Controller* _tmp0_ = NULL;
	NascPasteBinDialog* _tmp1_ = NULL;
	NascPasteBinDialog* _tmp2_ = NULL;
	self = _data1_->self;
	gtk_widget_hide ((GtkWidget*) _data1_->export_popover);
	_tmp0_ = self->priv->controller;
	_tmp1_ = nasc_paste_bin_dialog_new ((GtkWindow*) self, _tmp0_);
	g_object_ref_sink (_tmp1_);
	_tmp2_ = _tmp1_;
	_g_object_unref0 (_tmp2_);
}


static void ___lambda56__gtk_button_clicked (GtkButton* _sender, gpointer self) {
	__lambda56_ (self);
}


static gboolean __lambda58_ (NascMainWindow* self) {
	gboolean result = FALSE;
	InputView* _tmp0_ = NULL;
	_tmp0_ = self->priv->input_box;
	input_view_delete_characters (_tmp0_, 10);
	result = FALSE;
	return result;
}


static gboolean ___lambda58__gsource_func (gpointer self) {
	gboolean result;
	result = __lambda58_ ((NascMainWindow*) self);
	return result;
}


static void __lambda57_ (Block1Data* _data1_) {
	NascMainWindow* self;
	self = _data1_->self;
	g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 10, ___lambda58__gsource_func, g_object_ref (self), g_object_unref);
	nasc_main_window_show_tutorial (self, _data1_->info_bar);
}


static void ___lambda57__controller_tutorial (Controller* _sender, gpointer self) {
	__lambda57_ (self);
}


static gboolean __lambda87_ (NascMainWindow* self) {
	gboolean result = FALSE;
	InputView* _tmp0_ = NULL;
	_tmp0_ = self->priv->input_box;
	input_view_delete_characters (_tmp0_, 6);
	result = FALSE;
	return result;
}


static gboolean ___lambda87__gsource_func (gpointer self) {
	gboolean result;
	result = __lambda87_ ((NascMainWindow*) self);
	return result;
}


static void __lambda86_ (NascMainWindow* self) {
	PeriodicTable* _tmp0_ = NULL;
	GtkStack* _tmp1_ = NULL;
	PeriodicTable* _tmp2_ = NULL;
	g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 10, ___lambda87__gsource_func, g_object_ref (self), g_object_unref);
	_tmp0_ = self->priv->periodic_box;
	periodic_table_init (_tmp0_);
	_tmp1_ = self->priv->main_stack;
	_tmp2_ = self->priv->periodic_box;
	gtk_stack_set_visible_child (_tmp1_, (GtkWidget*) _tmp2_);
}


static void ___lambda86__controller_periodic (Controller* _sender, gpointer self) {
	__lambda86_ ((NascMainWindow*) self);
}


static gboolean __lambda88_ (Block1Data* _data1_) {
	NascMainWindow* self;
	gboolean result = FALSE;
	NascSettings* _tmp0_ = NULL;
	NascSettings* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp4_ = FALSE;
	self = _data1_->self;
	_tmp0_ = nasc_settings_get_instance ();
	_tmp1_ = _tmp0_;
	_tmp2_ = nasc_settings_get_show_tutorial (_tmp1_);
	_tmp3_ = _tmp2_;
	_tmp4_ = _tmp3_;
	_g_object_unref0 (_tmp1_);
	if (_tmp4_) {
		nasc_main_window_show_tutorial (self, _data1_->info_bar);
	}
	result = FALSE;
	return result;
}


static gboolean ___lambda88__gsource_func (gpointer self) {
	gboolean result;
	result = __lambda88_ (self);
	return result;
}


NascMainWindow* nasc_main_window_construct (GType object_type, NascNascApp* app) {
	NascMainWindow * self = NULL;
	Block1Data* _data1_;
	NascNascApp* _tmp0_ = NULL;
	NascNascApp* _tmp1_ = NULL;
	NascNascApp* _tmp2_ = NULL;
	gint x = 0;
	NascSettings* _tmp3_ = NULL;
	NascSettings* _tmp4_ = NULL;
	gint _tmp5_ = 0;
	gint _tmp6_ = 0;
	gint _tmp7_ = 0;
	gint y = 0;
	NascSettings* _tmp8_ = NULL;
	NascSettings* _tmp9_ = NULL;
	gint _tmp10_ = 0;
	gint _tmp11_ = 0;
	gint _tmp12_ = 0;
	gboolean _tmp13_ = FALSE;
	gint _tmp14_ = 0;
	NascSettings* _tmp26_ = NULL;
	NascSettings* _tmp27_ = NULL;
	gint _tmp28_ = 0;
	gint _tmp29_ = 0;
	NascSettings* _tmp30_ = NULL;
	NascSettings* _tmp31_ = NULL;
	gint _tmp32_ = 0;
	gint _tmp33_ = 0;
	GtkHeaderBar* toolbar = NULL;
	GtkHeaderBar* _tmp34_ = NULL;
	NascNascApp* _tmp35_ = NULL;
	const gchar* _tmp36_ = NULL;
	GtkToggleButton* _tmp37_ = NULL;
	GtkToggleButton* _tmp38_ = NULL;
	GtkImage* _tmp39_ = NULL;
	GtkImage* _tmp40_ = NULL;
	GtkToggleButton* _tmp41_ = NULL;
	GtkButton* export_button = NULL;
	GtkButton* _tmp42_ = NULL;
	GtkPopover* _tmp43_ = NULL;
	GtkButton* pdf_button = NULL;
	const gchar* _tmp44_ = NULL;
	GtkButton* _tmp45_ = NULL;
	GtkStyleContext* _tmp46_ = NULL;
	GtkButton* share_button = NULL;
	const gchar* _tmp47_ = NULL;
	GtkButton* _tmp48_ = NULL;
	GtkStyleContext* _tmp49_ = NULL;
	GtkBox* export_box = NULL;
	GtkBox* _tmp50_ = NULL;
	GtkToggleButton* _tmp51_ = NULL;
	GtkStack* _tmp52_ = NULL;
	GtkBox* _tmp53_ = NULL;
	GtkStack* _tmp54_ = NULL;
	GtkStack* _tmp55_ = NULL;
	GtkInfoBar* _tmp56_ = NULL;
	GtkStack* _tmp57_ = NULL;
	InputView* _tmp58_ = NULL;
	ResultView* _tmp59_ = NULL;
	GtkPaned* content_pane = NULL;
	GtkPaned* _tmp60_ = NULL;
	GtkStack* _tmp61_ = NULL;
	ResultView* _tmp62_ = NULL;
	GtkPaned* _tmp63_ = NULL;
	GtkPaned* _tmp64_ = NULL;
	GtkPaned* _tmp65_ = NULL;
	InputView* _tmp66_ = NULL;
	GtkPaned* _tmp67_ = NULL;
	GtkStack* _tmp68_ = NULL;
	GtkPaned* _tmp69_ = NULL;
	NascSettings* _tmp70_ = NULL;
	NascSettings* _tmp71_ = NULL;
	gint _tmp72_ = 0;
	gint _tmp73_ = 0;
	GtkScrolledWindow* _tmp74_ = NULL;
	InputView* _tmp75_ = NULL;
	GtkPaned* _tmp76_ = NULL;
	InputView* _tmp77_ = NULL;
	ResultView* _tmp78_ = NULL;
	Controller* _tmp79_ = NULL;
	Controller* _tmp80_ = NULL;
	HelpBox* _tmp81_ = NULL;
	GtkStack* _tmp82_ = NULL;
	HelpBox* _tmp83_ = NULL;
	Controller* _tmp84_ = NULL;
	PeriodicTable* _tmp85_ = NULL;
	PeriodicTable* _tmp86_ = NULL;
	GtkStack* _tmp87_ = NULL;
	PeriodicTable* _tmp88_ = NULL;
	GtkPaned* _tmp89_ = NULL;
	GtkToggleButton* _tmp90_ = NULL;
	InputView* _tmp91_ = NULL;
	InputView* _tmp92_ = NULL;
	HelpBox* _tmp93_ = NULL;
	Controller* _tmp94_ = NULL;
	Controller* _tmp95_ = NULL;
	ResultView* _tmp96_ = NULL;
	GtkPaned* _tmp97_ = NULL;
	gint _tmp98_ = 0;
	GtkPaned* _tmp99_ = NULL;
	gint _tmp100_ = 0;
	gint _tmp101_ = 0;
	g_return_val_if_fail (app != NULL, NULL);
	_data1_ = g_slice_new0 (Block1Data);
	_data1_->_ref_count_ = 1;
	self = (NascMainWindow*) g_object_new (object_type, NULL);
	_data1_->self = g_object_ref (self);
	_tmp0_ = app;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->app);
	self->priv->app = _tmp1_;
	_tmp2_ = app;
	gtk_window_set_application ((GtkWindow*) self, (GtkApplication*) _tmp2_);
	gtk_window_set_icon_name ((GtkWindow*) self, "nasc");
	_tmp3_ = nasc_settings_get_instance ();
	_tmp4_ = _tmp3_;
	_tmp5_ = nasc_settings_get_opening_x (_tmp4_);
	_tmp6_ = _tmp5_;
	_tmp7_ = _tmp6_;
	_g_object_unref0 (_tmp4_);
	x = _tmp7_;
	_tmp8_ = nasc_settings_get_instance ();
	_tmp9_ = _tmp8_;
	_tmp10_ = nasc_settings_get_opening_y (_tmp9_);
	_tmp11_ = _tmp10_;
	_tmp12_ = _tmp11_;
	_g_object_unref0 (_tmp9_);
	y = _tmp12_;
	_tmp14_ = x;
	if (_tmp14_ != -1) {
		gint _tmp15_ = 0;
		_tmp15_ = y;
		_tmp13_ = _tmp15_ != -1;
	} else {
		_tmp13_ = FALSE;
	}
	if (_tmp13_) {
		gint _tmp16_ = 0;
		gint _tmp17_ = 0;
		_tmp16_ = x;
		_tmp17_ = y;
		gtk_window_move ((GtkWindow*) self, _tmp16_, _tmp17_);
	} else {
		gint _tmp18_ = 0;
		gint _tmp19_ = 0;
		gint _tmp20_ = 0;
		gint _tmp21_ = 0;
		gint _tmp22_ = 0;
		gint _tmp23_ = 0;
		gint _tmp24_ = 0;
		gint _tmp25_ = 0;
		_tmp18_ = gdk_screen_width ();
		g_object_get ((GtkWindow*) self, "default-width", &_tmp19_, NULL);
		_tmp20_ = _tmp19_;
		x = (_tmp18_ - _tmp20_) / 2;
		_tmp21_ = gdk_screen_height ();
		g_object_get ((GtkWindow*) self, "default-height", &_tmp22_, NULL);
		_tmp23_ = _tmp22_;
		y = (_tmp21_ - _tmp23_) / 2;
		_tmp24_ = x;
		_tmp25_ = y;
		gtk_window_move ((GtkWindow*) self, _tmp24_, _tmp25_);
	}
	_tmp26_ = nasc_settings_get_instance ();
	_tmp27_ = _tmp26_;
	_tmp28_ = nasc_settings_get_window_width (_tmp27_);
	_tmp29_ = _tmp28_;
	_tmp30_ = nasc_settings_get_instance ();
	_tmp31_ = _tmp30_;
	_tmp32_ = nasc_settings_get_window_height (_tmp31_);
	_tmp33_ = _tmp32_;
	gtk_window_set_default_size ((GtkWindow*) self, _tmp29_, _tmp33_);
	_g_object_unref0 (_tmp31_);
	_g_object_unref0 (_tmp27_);
	g_signal_connect_object ((GtkWidget*) self, "delete-event", (GCallback) _nasc_main_window_on_window_closing_gtk_widget_delete_event, self, 0);
	_tmp34_ = (GtkHeaderBar*) gtk_header_bar_new ();
	g_object_ref_sink (_tmp34_);
	toolbar = _tmp34_;
	_tmp35_ = app;
	_tmp36_ = ((GraniteApplication*) _tmp35_)->program_name;
	gtk_header_bar_set_title (toolbar, _tmp36_);
	gtk_window_set_titlebar ((GtkWindow*) self, (GtkWidget*) toolbar);
	gtk_header_bar_set_show_close_button (toolbar, TRUE);
	_tmp37_ = (GtkToggleButton*) gtk_toggle_button_new ();
	g_object_ref_sink (_tmp37_);
	_g_object_unref0 (self->priv->help_button);
	self->priv->help_button = _tmp37_;
	_tmp38_ = self->priv->help_button;
	_tmp39_ = (GtkImage*) gtk_image_new_from_icon_name ("help-contents", GTK_ICON_SIZE_LARGE_TOOLBAR);
	g_object_ref_sink (_tmp39_);
	_tmp40_ = _tmp39_;
	gtk_button_set_image ((GtkButton*) _tmp38_, (GtkWidget*) _tmp40_);
	_g_object_unref0 (_tmp40_);
	_tmp41_ = self->priv->help_button;
	gtk_widget_set_tooltip_markup ((GtkWidget*) _tmp41_, "Open help");
	_tmp42_ = (GtkButton*) gtk_button_new_from_icon_name ("document-export", GTK_ICON_SIZE_LARGE_TOOLBAR);
	g_object_ref_sink (_tmp42_);
	export_button = _tmp42_;
	gtk_widget_set_tooltip_markup ((GtkWidget*) export_button, "Exportâ€¦");
	_tmp43_ = (GtkPopover*) gtk_popover_new ((GtkWidget*) export_button);
	g_object_ref_sink (_tmp43_);
	_data1_->export_popover = _tmp43_;
	_tmp44_ = _ ("Export to PDF");
	_tmp45_ = (GtkButton*) gtk_button_new_with_label (_tmp44_);
	g_object_ref_sink (_tmp45_);
	pdf_button = _tmp45_;
	_tmp46_ = gtk_widget_get_style_context ((GtkWidget*) pdf_button);
	gtk_style_context_add_class (_tmp46_, "flat");
	g_object_set ((GtkWidget*) pdf_button, "margin", 5, NULL);
	_tmp47_ = _ ("Share via PasteBin");
	_tmp48_ = (GtkButton*) gtk_button_new_with_label (_tmp47_);
	g_object_ref_sink (_tmp48_);
	share_button = _tmp48_;
	_tmp49_ = gtk_widget_get_style_context ((GtkWidget*) share_button);
	gtk_style_context_add_class (_tmp49_, "flat");
	g_object_set ((GtkWidget*) share_button, "margin", 5, NULL);
	gtk_widget_set_margin_top ((GtkWidget*) share_button, 0);
	_tmp50_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 0);
	g_object_ref_sink (_tmp50_);
	export_box = _tmp50_;
	gtk_box_pack_start (export_box, (GtkWidget*) pdf_button, TRUE, TRUE, (guint) 0);
	gtk_box_pack_start (export_box, (GtkWidget*) share_button, TRUE, TRUE, (guint) 0);
	gtk_container_add ((GtkContainer*) _data1_->export_popover, (GtkWidget*) export_box);
	g_signal_connect_data (export_button, "clicked", (GCallback) ___lambda48__gtk_button_clicked, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
	gtk_header_bar_pack_end (toolbar, (GtkWidget*) export_button);
	_tmp51_ = self->priv->help_button;
	gtk_header_bar_pack_end (toolbar, (GtkWidget*) _tmp51_);
	_tmp52_ = (GtkStack*) gtk_stack_new ();
	g_object_ref_sink (_tmp52_);
	_g_object_unref0 (self->priv->main_stack);
	self->priv->main_stack = _tmp52_;
	_tmp53_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 0);
	g_object_ref_sink (_tmp53_);
	_data1_->main_box = _tmp53_;
	_tmp54_ = self->priv->main_stack;
	gtk_stack_add_named (_tmp54_, (GtkWidget*) _data1_->main_box, "main");
	_tmp55_ = self->priv->main_stack;
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp55_);
	_tmp56_ = (GtkInfoBar*) gtk_info_bar_new ();
	g_object_ref_sink (_tmp56_);
	_data1_->info_bar = _tmp56_;
	gtk_info_bar_set_message_type (_data1_->info_bar, GTK_MESSAGE_QUESTION);
	gtk_widget_set_no_show_all ((GtkWidget*) _data1_->info_bar, TRUE);
	gtk_widget_hide ((GtkWidget*) _data1_->info_bar);
	gtk_box_pack_start (_data1_->main_box, (GtkWidget*) _data1_->info_bar, FALSE, TRUE, (guint) 0);
	_tmp57_ = (GtkStack*) gtk_stack_new ();
	g_object_ref_sink (_tmp57_);
	_g_object_unref0 (self->priv->right_stack);
	self->priv->right_stack = _tmp57_;
	_tmp58_ = input_view_new ();
	g_object_ref_sink (_tmp58_);
	_g_object_unref0 (self->priv->input_box);
	self->priv->input_box = _tmp58_;
	_tmp59_ = result_view_new ();
	g_object_ref_sink (_tmp59_);
	_g_object_unref0 (self->priv->result_box);
	self->priv->result_box = _tmp59_;
	_tmp60_ = (GtkPaned*) gtk_paned_new (GTK_ORIENTATION_HORIZONTAL);
	g_object_ref_sink (_tmp60_);
	content_pane = _tmp60_;
	gtk_paned_set_position (content_pane, 150);
	_tmp61_ = self->priv->right_stack;
	_tmp62_ = self->priv->result_box;
	gtk_stack_add_named (_tmp61_, (GtkWidget*) _tmp62_, "result");
	_tmp63_ = (GtkPaned*) gtk_paned_new (GTK_ORIENTATION_HORIZONTAL);
	g_object_ref_sink (_tmp63_);
	_g_object_unref0 (self->priv->pane);
	self->priv->pane = _tmp63_;
	_tmp64_ = self->priv->pane;
	g_object_set ((GtkWidget*) _tmp64_, "expand", TRUE, NULL);
	_tmp65_ = self->priv->pane;
	_tmp66_ = self->priv->input_box;
	gtk_paned_pack1 (_tmp65_, (GtkWidget*) _tmp66_, TRUE, FALSE);
	_tmp67_ = self->priv->pane;
	_tmp68_ = self->priv->right_stack;
	gtk_paned_pack2 (_tmp67_, (GtkWidget*) _tmp68_, TRUE, FALSE);
	_tmp69_ = self->priv->pane;
	_tmp70_ = nasc_settings_get_instance ();
	_tmp71_ = _tmp70_;
	_tmp72_ = nasc_settings_get_pane_position (_tmp71_);
	_tmp73_ = _tmp72_;
	gtk_paned_set_position (_tmp69_, _tmp73_);
	_g_object_unref0 (_tmp71_);
	_tmp74_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
	g_object_ref_sink (_tmp74_);
	_data1_->scroll = _tmp74_;
	gtk_scrolled_window_set_policy (_data1_->scroll, GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);
	_tmp75_ = self->priv->input_box;
	g_signal_connect_data ((GtkWidget*) _tmp75_, "size-allocate", (GCallback) ___lambda49__gtk_widget_size_allocate, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
	_tmp76_ = self->priv->pane;
	gtk_container_add ((GtkContainer*) _data1_->scroll, (GtkWidget*) _tmp76_);
	gtk_paned_pack2 (content_pane, (GtkWidget*) _data1_->scroll, TRUE, FALSE);
	gtk_box_pack_start (_data1_->main_box, (GtkWidget*) content_pane, TRUE, TRUE, (guint) 0);
	_tmp77_ = self->priv->input_box;
	_tmp78_ = self->priv->result_box;
	_tmp79_ = controller_new (_tmp77_, _tmp78_);
	_g_object_unref0 (self->priv->controller);
	self->priv->controller = _tmp79_;
	_tmp80_ = self->priv->controller;
	_tmp81_ = help_box_new (_tmp80_);
	g_object_ref_sink (_tmp81_);
	_g_object_unref0 (self->priv->help_box);
	self->priv->help_box = _tmp81_;
	_tmp82_ = self->priv->right_stack;
	_tmp83_ = self->priv->help_box;
	gtk_stack_add_named (_tmp82_, (GtkWidget*) _tmp83_, "help");
	_tmp84_ = self->priv->controller;
	_tmp85_ = periodic_table_new (_tmp84_);
	g_object_ref_sink (_tmp85_);
	_g_object_unref0 (self->priv->periodic_box);
	self->priv->periodic_box = _tmp85_;
	_tmp86_ = self->priv->periodic_box;
	g_signal_connect_data (_tmp86_, "close", (GCallback) ___lambda50__periodic_table_close, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
	_tmp87_ = self->priv->main_stack;
	_tmp88_ = self->priv->periodic_box;
	gtk_stack_add_named (_tmp87_, (GtkWidget*) _tmp88_, "periodic");
	_tmp89_ = self->priv->pane;
	g_signal_connect_object ((GObject*) _tmp89_, "notify::position", (GCallback) ___lambda51__g_object_notify, self, 0);
	_tmp90_ = self->priv->help_button;
	g_signal_connect_object (_tmp90_, "toggled", (GCallback) _nasc_main_window_help_toggle_gtk_toggle_button_toggled, self, 0);
	_tmp91_ = self->priv->input_box;
	g_signal_connect_object (_tmp91_, "new-trigger", (GCallback) ___lambda52__input_view_new_trigger, self, 0);
	_tmp92_ = self->priv->input_box;
	g_signal_connect_object (_tmp92_, "help", (GCallback) ___lambda53__input_view_help, self, 0);
	_tmp93_ = self->priv->help_box;
	g_signal_connect_object (_tmp93_, "close-help", (GCallback) ___lambda54__help_box_close_help, self, 0);
	g_signal_connect_data (pdf_button, "clicked", (GCallback) ___lambda55__gtk_button_clicked, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
	g_signal_connect_data (share_button, "clicked", (GCallback) ___lambda56__gtk_button_clicked, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
	_tmp94_ = self->priv->controller;
	g_signal_connect_data (_tmp94_, "tutorial", (GCallback) ___lambda57__controller_tutorial, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
	_tmp95_ = self->priv->controller;
	g_signal_connect_object (_tmp95_, "periodic", (GCallback) ___lambda86__controller_periodic, self, 0);
	gtk_widget_show_all ((GtkWidget*) self);
	g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) 500, ___lambda88__gsource_func, block1_data_ref (_data1_), block1_data_unref);
	_tmp96_ = self->priv->result_box;
	_tmp97_ = self->priv->pane;
	_tmp98_ = gtk_widget_get_allocated_width ((GtkWidget*) _tmp97_);
	_tmp99_ = self->priv->pane;
	_tmp100_ = gtk_paned_get_position (_tmp99_);
	_tmp101_ = _tmp100_;
	result_view_set_width (_tmp96_, (_tmp98_ - _tmp101_) - 1);
	_g_object_unref0 (content_pane);
	_g_object_unref0 (export_box);
	_g_object_unref0 (share_button);
	_g_object_unref0 (pdf_button);
	_g_object_unref0 (export_button);
	_g_object_unref0 (toolbar);
	block1_data_unref (_data1_);
	_data1_ = NULL;
	return self;
}


NascMainWindow* nasc_main_window_new (NascNascApp* app) {
	return nasc_main_window_construct (NASC_TYPE_MAIN_WINDOW, app);
}


static Block2Data* block2_data_ref (Block2Data* _data2_) {
	g_atomic_int_inc (&_data2_->_ref_count_);
	return _data2_;
}


static void block2_data_unref (void * _userdata_) {
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
		NascMainWindow* self;
		self = _data2_->self;
		_g_object_unref0 (_data2_->info_bar);
		_g_object_unref0 (self);
		g_slice_free (Block2Data, _data2_);
	}
}


static void __lambda85_ (Block2Data* _data2_) {
	NascMainWindow* self;
	GtkInfoBar* _tmp0_ = NULL;
	GtkInfoBar* _tmp1_ = NULL;
	self = _data2_->self;
	_tmp0_ = _data2_->info_bar;
	gtk_widget_set_no_show_all ((GtkWidget*) _tmp0_, TRUE);
	_tmp1_ = _data2_->info_bar;
	gtk_widget_hide ((GtkWidget*) _tmp1_);
}


static void ___lambda85__tutorial_close (Tutorial* _sender, gpointer self) {
	__lambda85_ (self);
}


static void nasc_main_window_show_tutorial (NascMainWindow* self, GtkInfoBar* info_bar) {
	Block2Data* _data2_;
	GtkInfoBar* _tmp0_ = NULL;
	GtkInfoBar* _tmp1_ = NULL;
	GtkContainer* content = NULL;
	GtkInfoBar* _tmp2_ = NULL;
	GtkContainer* _tmp3_ = NULL;
	GtkContainer* _tmp4_ = NULL;
	GtkContainer* _tmp5_ = NULL;
	GList* _tmp6_ = NULL;
	Tutorial* tut = NULL;
	Controller* _tmp8_ = NULL;
	Tutorial* _tmp9_ = NULL;
	GtkContainer* _tmp10_ = NULL;
	GtkInfoBar* _tmp11_ = NULL;
	GtkInfoBar* _tmp12_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (info_bar != NULL);
	_data2_ = g_slice_new0 (Block2Data);
	_data2_->_ref_count_ = 1;
	_data2_->self = g_object_ref (self);
	_tmp0_ = info_bar;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (_data2_->info_bar);
	_data2_->info_bar = _tmp1_;
	_tmp2_ = _data2_->info_bar;
	_tmp3_ = gtk_info_bar_get_content_area (_tmp2_);
	_tmp4_ = _g_object_ref0 (_tmp3_);
	content = _tmp4_;
	_tmp5_ = content;
	_tmp6_ = gtk_container_get_children (_tmp5_);
	{
		GList* w_collection = NULL;
		GList* w_it = NULL;
		w_collection = _tmp6_;
		for (w_it = w_collection; w_it != NULL; w_it = w_it->next) {
			GtkWidget* w = NULL;
			w = (GtkWidget*) w_it->data;
			{
				GtkWidget* _tmp7_ = NULL;
				_tmp7_ = w;
				gtk_widget_destroy (_tmp7_);
			}
		}
		_g_list_free0 (w_collection);
	}
	_tmp8_ = self->priv->controller;
	_tmp9_ = tutorial_new (_tmp8_);
	g_object_ref_sink (_tmp9_);
	tut = _tmp9_;
	_tmp10_ = content;
	gtk_container_add (_tmp10_, (GtkWidget*) tut);
	g_signal_connect_data (tut, "close", (GCallback) ___lambda85__tutorial_close, block2_data_ref (_data2_), (GClosureNotify) block2_data_unref, 0);
	_tmp11_ = _data2_->info_bar;
	gtk_widget_set_no_show_all ((GtkWidget*) _tmp11_, FALSE);
	_tmp12_ = _data2_->info_bar;
	gtk_widget_show_all ((GtkWidget*) _tmp12_);
	_g_object_unref0 (tut);
	_g_object_unref0 (content);
	block2_data_unref (_data2_);
	_data2_ = NULL;
}


static void nasc_main_window_help_toggle (NascMainWindow* self) {
	GtkToggleButton* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->help_button;
	_tmp1_ = gtk_toggle_button_get_active (_tmp0_);
	_tmp2_ = _tmp1_;
	if (_tmp2_) {
		GtkStack* _tmp3_ = NULL;
		GtkStack* _tmp4_ = NULL;
		HelpBox* _tmp5_ = NULL;
		_tmp3_ = self->priv->right_stack;
		gtk_stack_set_transition_type (_tmp3_, GTK_STACK_TRANSITION_TYPE_SLIDE_LEFT);
		_tmp4_ = self->priv->right_stack;
		gtk_stack_set_visible_child_name (_tmp4_, "help");
		_tmp5_ = self->priv->help_box;
		help_box_search_focus (_tmp5_);
	} else {
		GtkStack* _tmp6_ = NULL;
		GtkStack* _tmp7_ = NULL;
		InputView* _tmp8_ = NULL;
		GtkSourceView* _tmp9_ = NULL;
		_tmp6_ = self->priv->right_stack;
		gtk_stack_set_transition_type (_tmp6_, GTK_STACK_TRANSITION_TYPE_SLIDE_RIGHT);
		_tmp7_ = self->priv->right_stack;
		gtk_stack_set_visible_child_name (_tmp7_, "result");
		_tmp8_ = self->priv->input_box;
		_tmp9_ = _tmp8_->source_view;
		gtk_widget_grab_focus ((GtkWidget*) _tmp9_);
	}
}


static gboolean nasc_main_window_on_window_closing (NascMainWindow* self) {
	gboolean result = FALSE;
	gint width = 0;
	gint height = 0;
	gint _tmp0_ = 0;
	gint _tmp1_ = 0;
	NascSettings* _tmp2_ = NULL;
	NascSettings* _tmp3_ = NULL;
	gint _tmp4_ = 0;
	NascSettings* _tmp5_ = NULL;
	NascSettings* _tmp6_ = NULL;
	gint _tmp7_ = 0;
	gint pane_width = 0;
	GtkPaned* _tmp8_ = NULL;
	gint _tmp9_ = 0;
	NascSettings* _tmp10_ = NULL;
	NascSettings* _tmp11_ = NULL;
	gint _tmp12_ = 0;
	gint root_x = 0;
	gint root_y = 0;
	gint _tmp13_ = 0;
	gint _tmp14_ = 0;
	NascSettings* _tmp15_ = NULL;
	NascSettings* _tmp16_ = NULL;
	gint _tmp17_ = 0;
	NascSettings* _tmp18_ = NULL;
	NascSettings* _tmp19_ = NULL;
	gint _tmp20_ = 0;
	NascSettings* _tmp21_ = NULL;
	NascSettings* _tmp22_ = NULL;
	gboolean _tmp23_ = FALSE;
	gboolean _tmp24_ = FALSE;
	gboolean _tmp25_ = FALSE;
	Controller* _tmp28_ = NULL;
	g_return_val_if_fail (self != NULL, FALSE);
	gtk_window_get_size ((GtkWindow*) self, &_tmp0_, &_tmp1_);
	width = _tmp0_;
	height = _tmp1_;
	_tmp2_ = nasc_settings_get_instance ();
	_tmp3_ = _tmp2_;
	_tmp4_ = height;
	nasc_settings_set_window_height (_tmp3_, _tmp4_);
	_g_object_unref0 (_tmp3_);
	_tmp5_ = nasc_settings_get_instance ();
	_tmp6_ = _tmp5_;
	_tmp7_ = width;
	nasc_settings_set_window_width (_tmp6_, _tmp7_);
	_g_object_unref0 (_tmp6_);
	_tmp8_ = self->priv->pane;
	_tmp9_ = gtk_paned_get_position (_tmp8_);
	pane_width = _tmp9_;
	_tmp10_ = nasc_settings_get_instance ();
	_tmp11_ = _tmp10_;
	_tmp12_ = pane_width;
	nasc_settings_set_pane_position (_tmp11_, _tmp12_);
	_g_object_unref0 (_tmp11_);
	gtk_window_get_position ((GtkWindow*) self, &_tmp13_, &_tmp14_);
	root_x = _tmp13_;
	root_y = _tmp14_;
	_tmp15_ = nasc_settings_get_instance ();
	_tmp16_ = _tmp15_;
	_tmp17_ = root_x;
	nasc_settings_set_opening_x (_tmp16_, _tmp17_);
	_g_object_unref0 (_tmp16_);
	_tmp18_ = nasc_settings_get_instance ();
	_tmp19_ = _tmp18_;
	_tmp20_ = root_y;
	nasc_settings_set_opening_y (_tmp19_, _tmp20_);
	_g_object_unref0 (_tmp19_);
	_tmp21_ = nasc_settings_get_instance ();
	_tmp22_ = _tmp21_;
	_tmp23_ = nasc_settings_get_show_tutorial (_tmp22_);
	_tmp24_ = _tmp23_;
	_tmp25_ = _tmp24_;
	_g_object_unref0 (_tmp22_);
	if (_tmp25_) {
		NascSettings* _tmp26_ = NULL;
		NascSettings* _tmp27_ = NULL;
		_tmp26_ = nasc_settings_get_instance ();
		_tmp27_ = _tmp26_;
		nasc_settings_set_show_tutorial (_tmp27_, FALSE);
		_g_object_unref0 (_tmp27_);
	}
	_tmp28_ = self->priv->controller;
	controller_store_sheet_content (_tmp28_);
	result = FALSE;
	return result;
}


static void nasc_main_window_class_init (NascMainWindowClass * klass) {
	nasc_main_window_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (NascMainWindowPrivate));
	G_OBJECT_CLASS (klass)->finalize = nasc_main_window_finalize;
}


static void nasc_main_window_instance_init (NascMainWindow * self) {
	self->priv = NASC_MAIN_WINDOW_GET_PRIVATE (self);
}


static void nasc_main_window_finalize (GObject* obj) {
	NascMainWindow * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, NASC_TYPE_MAIN_WINDOW, NascMainWindow);
	_g_object_unref0 (self->priv->app);
	_g_object_unref0 (self->priv->pane);
	_g_object_unref0 (self->priv->controller);
	_g_object_unref0 (self->priv->input_box);
	_g_object_unref0 (self->priv->result_box);
	_g_object_unref0 (self->priv->help_box);
	_g_object_unref0 (self->priv->periodic_box);
	_g_object_unref0 (self->priv->help_button);
	_g_object_unref0 (self->priv->main_stack);
	_g_object_unref0 (self->priv->right_stack);
	G_OBJECT_CLASS (nasc_main_window_parent_class)->finalize (obj);
}


GType nasc_main_window_get_type (void) {
	static volatile gsize nasc_main_window_type_id__volatile = 0;
	if (g_once_init_enter (&nasc_main_window_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (NascMainWindowClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) nasc_main_window_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (NascMainWindow), 0, (GInstanceInitFunc) nasc_main_window_instance_init, NULL };
		GType nasc_main_window_type_id;
		nasc_main_window_type_id = g_type_register_static (gtk_window_get_type (), "NascMainWindow", &g_define_type_info, 0);
		g_once_init_leave (&nasc_main_window_type_id__volatile, nasc_main_window_type_id);
	}
	return nasc_main_window_type_id__volatile;
}



